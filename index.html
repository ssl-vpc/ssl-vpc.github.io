<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>egin</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.cdnfonts.com/css/vcr-osd-mono" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tahoma&display=swap" rel="stylesheet">
</head>
<body oncontextmenu="return false;">
    <div id="snow"></div>
    <div class="bg-image"></div>

    <div class="entry-screen" id="entryScreen">
        <span class="click-text">Click to Enter</span>
    </div>

    <div class="music-toggle" id="musicToggle" onclick="toggleMusicBox()">
        <i class="fas fa-music"></i>
    </div>
    
    <div class="music-box" id="musicBox">
        <div class="music-box-titlebar" id="musicBoxHeader">
            <div class="music-box-title">
                <i class="fas fa-compact-disc"></i>
                <span>Windows Media Player</span>
            </div>
            <div class="music-box-buttons">
                <span class="music-box-btn minimize">_</span>
                <span class="music-box-btn maximize">□</span>
                <span class="music-box-btn close" onclick="toggleMusicBox()">×</span>
            </div>
        </div>
        <div class="music-box-menubar">
            <span>File</span>
            <span>View</span>
            <span>Play</span>
            <span>Tools</span>
            <span>Help</span>
        </div>
        <div class="music-box-content">
            <div class="music-controls">
                <button onclick="prevTrack()"><i class="fas fa-backward"></i></button>
                <button onclick="togglePlay()" id="playBtn"><i class="fas fa-pause"></i></button>
                <button onclick="nextTrack()"><i class="fas fa-forward"></i></button>
                <button onclick="toggleShuffle()" id="shuffleBtn"><i class="fas fa-random"></i></button>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="track-list" id="trackList">
                <div class="track-item active" onclick="playTrack(1)"><img src="media/song1.jpg" class="track-icon"><span class="track-name">:3</span></div>
                <div class="track-item" onclick="playTrack(2)"><img src="media/song2.jpg" class="track-icon"><span class="track-name">stay with me</span></div>
                <div class="track-item" onclick="playTrack(3)"><img src="media/song3.jpg" class="track-icon"><span class="track-name">GOAT</span></div>
                <div class="track-item" onclick="playTrack(4)"><img src="media/song4.jpg" class="track-icon"><span class="track-name">everyday the same shit</span></div>
            </div>
        </div>
    </div>

    <audio id="bgAudio" preload="auto">
        <source src="media/song1.mp3" type="audio/mpeg">
    </audio>

    <div class="main-container" id="mainContent" style="opacity: 0;">
        <div class="xp-window">
            <div class="xp-titlebar">
                <span class="xp-title">/egin/</span>
                <div class="xp-buttons">
                    <span class="xp-btn minimize">_</span>
                    <span class="xp-btn maximize">□</span>
                    <span class="xp-btn close">×</span>
                </div>
            </div>
            <div class="xp-menubar">
                <span><u>F</u>ile</span>
                <span><u>E</u>dit</span>
                <span><u>V</u>iew</span>
                <span>F<u>a</u>vorites</span>
                <span><u>T</u>ools</span>
                <span><u>H</u>elp</span>
            </div>
            <div class="xp-toolbar">
                <div class="xp-tool-btn disabled">
                    <i class="fas fa-arrow-left xp-icon"></i>
                    <span>Back</span>
                    <i class="fas fa-caret-down xp-dropdown"></i>
                </div>
                <div class="xp-tool-btn disabled">
                    <i class="fas fa-arrow-right xp-icon"></i>
                </div>
                <div class="xp-tool-btn">
                    <i class="fas fa-arrow-up xp-icon"></i>
                </div>
                <div class="xp-separator"></div>
                <div class="xp-tool-btn">
                    <i class="fas fa-search xp-icon"></i>
                    <span>Search</span>
                </div>
                <div class="xp-tool-btn">
                    <i class="fas fa-folder xp-icon"></i>
                    <span>Folders</span>
                </div>
                <div class="xp-separator"></div>
                <div class="xp-tool-btn">
                    <i class="fas fa-th-list xp-icon"></i>
                    <i class="fas fa-caret-down xp-dropdown"></i>
                </div>
            </div>
            <div class="xp-address-bar">
                <span class="xp-address-label">Address</span>
                <div class="xp-address-input">
                    <i class="fas fa-folder xp-folder-icon"></i>
                    <span>C:\Users\egin\</span>
                </div>
                <div class="xp-go-btn">Go</div>
            </div>
            <div class="xp-content">
                <div class="xp-sidebar">
                    <div class="xp-sidebar-section">
                        <div class="xp-sidebar-title">
                            <i class="fas fa-caret-down xp-sidebar-arrow"></i>
                            File and Folder Tasks
                        </div>
                        <div class="xp-sidebar-item"><i class="fas fa-folder-plus xp-sidebar-icon"></i>Make a new folder</div>
                        <div class="xp-sidebar-item"><i class="fas fa-globe xp-sidebar-icon"></i>Publish to Web</div>
                        <div class="xp-sidebar-item"><i class="fas fa-share-alt xp-sidebar-icon"></i>Share this folder</div>
                    </div>
                    <div class="xp-sidebar-section">
                        <div class="xp-sidebar-title">
                            <i class="fas fa-caret-down xp-sidebar-arrow"></i>
                            Other Places
                        </div>
                        <div class="xp-sidebar-item"><i class="fas fa-desktop xp-sidebar-icon"></i>Desktop</div>
                        <div class="xp-sidebar-item"><i class="fas fa-file-alt xp-sidebar-icon"></i>My Documents</div>
                        <div class="xp-sidebar-item"><i class="fas fa-laptop xp-sidebar-icon"></i>My Computer</div>
                        <div class="xp-sidebar-item"><i class="fas fa-network-wired xp-sidebar-icon"></i>My Network</div>
                    </div>
                    <div class="xp-sidebar-section">
                        <div class="xp-sidebar-title">
                            <i class="fas fa-caret-down xp-sidebar-arrow"></i>
                            Details
                        </div>
                        <div class="xp-sidebar-details">
                            <div class="xp-detail-item">egin</div>
                            <div class="xp-detail-item">File Folder</div>
                            <div class="xp-detail-item">Modified: Today</div>
                        </div>
                    </div>
                </div>
                <div class="xp-files">
                    <a href="klynt.html" class="xp-file">
                        <img src="media/klynt.jpg" class="xp-file-icon">
                        <span class="xp-file-name">klynt</span>
                    </a>
                    <a href="vpc.html" class="xp-file">
                        <img src="media/vpc.jpg" class="xp-file-icon">
                        <span class="xp-file-name">vpc</span>
                    </a>
                    <a href="rifle.html" class="xp-file">
                        <img src="media/rifle.jpg" class="xp-file-icon">
                        <span class="xp-file-name">rifle</span>
                    </a>
                </div>
            </div>
            <div class="xp-statusbar">
                <span class="xp-status-left">3 objects</span>
                <span class="xp-status-right">My Computer</span>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script>
        const audio = document.getElementById('bgAudio');
        let currentTrack = parseInt(localStorage.getItem('currentTrack')) || 1;
        let isPlaying = false;
        let shuffle = false;
        let savedTime = parseFloat(localStorage.getItem('audioTime')) || 0;

        particlesJS("snow", {
            particles: {
                number: { value: 200, density: { enable: true, value_area: 800 }},
                color: { value: "#ffffff" },
                opacity: { value: 0.5, random: true },
                size: { value: 1.5, random: false },
                line_linked: { enable: false },
                move: { enable: true, speed: 15, direction: "bottom", random: false, straight: true, out_mode: "out" },
                shape: { type: "circle" }
            },
            interactivity: { detect_on: "canvas", events: { onhover: { enable: false }, onclick: { enable: false }, resize: true }},
            retina_detect: true
        });

        document.getElementById('entryScreen').addEventListener('click', function() {
            this.style.display = 'none';
            document.getElementById('mainContent').style.opacity = '1';
            audio.play();
            isPlaying = true;
        });

        audio.src = 'media/song' + currentTrack + '.mp3';
        audio.currentTime = savedTime;
        document.querySelectorAll('.track-item').forEach((t, i) => { t.classList.toggle('active', i === currentTrack - 1); });

        setInterval(() => {
            localStorage.setItem('audioTime', audio.currentTime);
            localStorage.setItem('currentTrack', currentTrack);
        }, 1000);

        function toggleMusicBox() { document.getElementById('musicBox').classList.toggle('show'); }

        function playTrack(num) {
            currentTrack = num;
            audio.src = 'media/song' + num + '.mp3';
            audio.play();
            isPlaying = true;
            document.getElementById('playBtn').innerHTML = '<i class="fas fa-pause"></i>';
            document.querySelectorAll('.track-item').forEach((t, i) => { t.classList.toggle('active', i === num - 1); });
            localStorage.setItem('currentTrack', currentTrack);
        }

        function togglePlay() {
            if (isPlaying) { audio.pause(); document.getElementById('playBtn').innerHTML = '<i class="fas fa-play"></i>'; }
            else { audio.play(); document.getElementById('playBtn').innerHTML = '<i class="fas fa-pause"></i>'; }
            isPlaying = !isPlaying;
        }

        function nextTrack() {
            currentTrack = shuffle ? Math.floor(Math.random() * 4) + 1 : (currentTrack >= 4 ? 1 : currentTrack + 1);
            playTrack(currentTrack);
        }

        function prevTrack() { currentTrack = currentTrack <= 1 ? 4 : currentTrack - 1; playTrack(currentTrack); }
        function toggleShuffle() { shuffle = !shuffle; document.getElementById('shuffleBtn').classList.toggle('active', shuffle); }

        audio.addEventListener('timeupdate', () => { document.getElementById('progressBar').style.width = (audio.currentTime / audio.duration) * 100 + '%'; });
        audio.addEventListener('ended', nextTrack);

        const musicBox = document.getElementById('musicBox');
        const header = document.getElementById('musicBoxHeader');
        let isDragging = false, offsetX, offsetY;

        header.addEventListener('mousedown', (e) => {
            if (e.target.classList.contains('close')) return;
            isDragging = true;
            offsetX = e.clientX - musicBox.offsetLeft;
            offsetY = e.clientY - musicBox.offsetTop;
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                musicBox.style.left = (e.clientX - offsetX) + 'px';
                musicBox.style.top = (e.clientY - offsetY) + 'px';
                musicBox.style.right = 'auto';
                musicBox.style.bottom = 'auto';
            }
        });

        document.addEventListener('mouseup', () => isDragging = false);

        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'I') e.preventDefault();
            if (e.ctrlKey && e.shiftKey && e.key === 'J') e.preventDefault();
            if (e.ctrlKey && e.key === 'u') e.preventDefault();
            if (e.key === 'F12') e.preventDefault();
        });
    </script>
</body>
</html>
